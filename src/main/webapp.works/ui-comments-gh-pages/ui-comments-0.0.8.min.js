angular.module("ui.comments",["ui.comments.tpls","ui.comments.directive"]),angular.module("ui.comments.tpls",["template/comments/comment.html","template/comments/comments.html"]),angular.module("ui.comments.directive",[]).provider("commentsConfig",function(){function a(a,b){"string"==typeof b&&(c[a]=b)}function b(a,b){c[a]=b&&"string"==typeof b||"function"==typeof b||angular.isArray(b)?b:d}var c={containerTemplate:"template/comments/comments.html",commentTemplate:"template/comments/comment.html",orderBy:"best",commentController:void 0},d=function(){},e={containerTemplate:a,commentTemplate:a,orderBy:a,commentController:b};this.$get=function(){return c},this.set=function(a,b){var c,d,f,g;if("string"==typeof a)c=e[a],c&&c(a,b);else if("object"==typeof a)for(f=Object.keys(a),g=0;g<f.length;++g)d=f[g],c=e[d],c&&c(d,a[d])}}).directive("comments",["$compile","commentsConfig",function(a,b){return{restrict:"EA",require:"?^comment",transclude:!0,replace:!0,templateUrl:function(){return b.containerTemplate},scope:!0,controller:["$scope",function(){}],compile:function(){return function(a,c,d){angular.isDefined,a.$eval,a.self={},a.$watchCollection(d.commentData,function(b){a.self.commentData=angular.isArray(b)?b:[]}),d.$observe("orderBy",function(c){a.self.commentOrder=c||b.orderBy})}}}}]).directive("comment",["$compile","commentsConfig",function(a,b){return{require:"^comments",restrict:"EA",transclude:!0,replace:!0,templateUrl:function(){return b.commentTemplate},controller:["$scope","$controller","commentsConfig",function(a,b,c){var d=a.$watch("$element",function(e){d(),d=void 0;var f,g=c.commentController;g&&(f=b(g,{$scope:a}),f&&e.data("$commentController",f))})}],compile:function(){return function(b,c,d){function e(c){if(angular.isArray(c)&&c.length>0&&!g){f=a(h)(b);var d=b.$watch("$$phase",function(){d(),b.$element.append(f),b.$element.triggerHandler("filled.comments",f),g=!0})}else angular.isArray(c)&&c.length||!g||(g=!1,f.remove(),f=void 0,b.$element.triggerHandler("emptied.comments"))}"true"===c.parent().attr("child-comments")&&c.addClass("child-comment"),b.comment=b.$eval(d.commentData);var f,g=!1,h=angular.element('<comments child-comments="true" comment-data="comment.children"></comments>');b.$element=c,b.$watchCollection(d.commentData,function(a){b.comment=a,e(b.comment.children)})}}}}]),angular.module("template/comments/comment.html",[]).run(["$templateCache",function(a){a.put("template/comments/comment.html",'<div class="comment">\n  <div class="comment-header">\n    <span class="comment-user">\n      <a class="comment-username" ng-if="comment.profileUrl" ng-href="{{comment.profileUrl}}" title="{{comment.name}}">{{comment.name}}</a>\n      <img class="comment-avatar" ng-if="comment.avatarUrl" ng-src="{{comment.avatarUrl}}" alt="{{comment.name}}" />\n      <span class="comment-username" ng-if="!comment.profileUrl">{{comment.name}}</span>\n      <span class="comment-date" ng-if="comment.date">{{comment.date}}</span>\n  </div>\n  <div class="comment-body" ng-bind="comment.text">\n      <child-comments comment-data="comment.children"></child-comments>\n  </div>\n</div>')}]),angular.module("template/comments/comments.html",[]).run(["$templateCache",function(a){a.put("template/comments/comments.html",'<div class="comments">\n  <comment ng-repeat="comment in self.commentData" comment-data="comment"></comment>\n</div>\n')}]);