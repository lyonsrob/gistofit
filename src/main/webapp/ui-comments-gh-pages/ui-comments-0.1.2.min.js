angular.module("ui.comments",["ui.comments.tpls","ui.comments.directive"]),angular.module("ui.comments.tpls",["template/comments/comment.html","template/comments/comments.html"]),angular.module("ui.comments.directive",[]).provider("commentsConfig",function(){function a(a,b){"string"==typeof b&&(c[a]=b)}function b(a,b){c[a]=b&&(angular.isString(b)&&b.length||angular.isFunction(b)||angular.isArray(b))?b:d}var c={containerTemplate:"template/comments/comments.html",commentTemplate:"template/comments/comment.html",orderBy:"best",commentController:void 0},d=function(){},e={containerTemplate:a,commentTemplate:a,orderBy:a,commentController:b};this.$get=function(){return c},this.set=function(a,b){var c,d,f,g;if("string"==typeof a)c=e[a],c&&c(a,b);else if("object"==typeof a)for(f=Object.keys(a),g=0;g<f.length;++g)d=f[g],c=e[d],c&&c(d,a[d])}}).directive("comments",["$compile","commentsConfig",function(a,b){return{restrict:"EA",require:["?^comment"],transclude:!0,replace:!0,templateUrl:function(){return b.containerTemplate},scope:{comments:"=commentData"},controller:function(){},compile:function(){return function(a,c,d){d.$observe("orderBy",function(c){a.commentOrder=c||b.orderBy})}}}}]).directive("comment",["$compile","commentsConfig","$controller","$exceptionHandler","$timeout",function(a,b,c,d){return{require:["^comments","comment"],restrict:"EA",transclude:!0,replace:!0,templateUrl:function(){return b.commentTemplate},scope:{comment:"=commentData"},controller:["$scope",function(){}],compile:function(){return function(e,f,g,h){function i(a,b,c){if(k){var e,f,g=a.$$listeners[b]||[],h=[c];for(e=0,f=g.length;f>e;e++)if(g[e])try{g[e].apply(null,h)}catch(i){d(i)}else g.splice(e,1),e--,f--}}function j(b){if(angular.isArray(b)||(b=[]),b.length>0&&!p){n=a(q)(e),l.commentsTransclude?(o=l.commentsTransclude.clone(!0),l.commentsTransclude.replaceWith(n)):f.append(n),p=!0;var c=e.$watch(function(){return n.children().length},function(a){a>=b.length&&(c(),i(e,"$filledNestedComments",n))})}else!b.length&&p&&(p=!1,l.commentsTransclude&&o?n.replaceWith(o):n.remove(),i(e,"$emptiedNestedComments",l.commentsTransclude||f),o=n=void 0)}var k,l=(h[0],h[1]),m=b.commentController;m&&(k=c(m,{$scope:e,$element:f}),k&&f.data("$CommentController",k)),"true"===f.parent().attr("child-comments")&&f.addClass("child-comment");var n,o,p=!1,q=angular.element('<comments child-comments="true" comment-data="comment.children"></comments>');e.$watch("comment",function(){j(e.comment.children)},!0)}}}}]).directive("commentsTransclude",function(){return{restrict:"EA",require:"^comment",link:{post:function(a,b,c,d){b.addClass("comments-transclude"),d.commentsTransclude=b}}}}),angular.module("template/comments/comment.html",[]).run(["$templateCache",function(a){a.put("template/comments/comment.html",'<div class="comment">\n  <div class="comment-header">\n    <span class="comment-user">\n      <a class="comment-username" ng-if="comment.profileUrl" ng-href="{{comment.profileUrl}}" title="{{comment.name}}">{{comment.name}}</a>\n      <img class="comment-avatar" ng-if="comment.avatarUrl" ng-src="{{comment.avatarUrl}}" alt="{{comment.name}}" />\n      <span class="comment-username" ng-if="!comment.profileUrl">{{comment.name}}</span>\n      <span class="comment-date" ng-if="comment.date">{{comment.date}}</span>\n  </div>\n  <div class="comment-body">\n    <div ng-bind="comment.text"></div>\n    <div comments-transclude comment-data="comment.children"></div>\n  </div>\n</div>')}]),angular.module("template/comments/comments.html",[]).run(["$templateCache",function(a){a.put("template/comments/comments.html",'<div class="comments">\n  <comment ng-repeat="comment in comments" comment-data="comment"></comment>\n</div>\n')}]);